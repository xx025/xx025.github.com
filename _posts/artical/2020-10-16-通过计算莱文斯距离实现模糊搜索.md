
- åœ¨ç¼–å†™é—®ç­”å·ç­”é¢˜çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½ é¢˜åº“é‡Œå­˜çš„é—®é¢˜å’ŒçœŸæ­£å±•ç¤ºçš„é—®é¢˜æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œå½“ç„¶å³ä½¿å·®åˆ«ä»…ä»…æ˜¯0.0001ï¼Œå‘åˆ—è¡¨æœç´¢çš„æ—¶å€™ä¾ç„¶ä¼šè¿”å›ç©ºã€‚æˆ‘å°±æƒ³æœ‰æ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ª`æ¨¡ç³Šæœç´¢`é—®é¢˜ï¼Œå¹¶æ²¡æœ‰èŠ±è´¹å¤šå°‘æ—¶é—´å°±æ‰¾åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒåˆé€‚çš„æ•°å­¦å·¥å…·`èŠæ–‡æ–¯å¦è·é›¢(Levenshteinè·é›¢)`ï¼Œé€šè¿‡è®¡ç®—å­—ç¬¦ä¸²é—´çš„è¿™ä¸ªè·ç¦»å°±èƒ½å¾ˆå®¹æ˜“çš„æ¯”å¯¹å‡ºè¦æœç´¢çš„ç»“æœã€‚

ç»´åŸºç™¾ç§‘å‚è€ƒï¼š<a  href="https://zh.m.wikipedia.org/zh-hk/èŠæ–‡æ–¯å¦è·é›¢y">èŠæ–‡æ–¯å¦è·é›¢</a> 



### 1. ä¸€èˆ¬æƒ…å†µä¸‹ï¼š  


```python
# @File    : main.py
import Levenshtein
import englishwords

lis = englishwords.lis


def fuzzysearch(str_, lis_):
    lis = [Levenshtein.distance(str_, i) for i in lis_]
    # åˆ†åˆ«è®¡ç®—è±æ–‡æ–¯å¦è·ç¦»ï¼ˆLevenshteinï¼‰
    return lis_[lis.index(min(lis))]
    # è¿”å›åˆ—è¡¨ä¸­è±æ–‡æ–¯è·ç¦»çš„æœ€å°å€¼çš„å­—ç¬¦ä¸²


print(fuzzysearch('directy', lis))
print(fuzzysearch('dieooooooocty', lis))

# è¾“å‡ºï¼š
# directly
# discomfort

# =======
# æ³¨æ„ï¼šenglishwords.pyæ–‡ä»¶åœ¨æ–‡ç« å°¾éƒ¨
```



é™¤ä¸Šé¢å¤–æˆ‘è¿˜æƒ³åˆ°äº†å…¶ä»–ä¸¤ç‚¹:

1. åœ¨ä½ ç»™å®šå­—ç¬¦ä¸²`str`åä¸€èˆ¬ä½ æƒ³è¦çš„ç»“æœ`r_str`åº”è¯¥æœ‰ä¸€å®šçš„é•¿åº¦é™åˆ¶ï¼Œå¦‚
    ```
    |len(r_str)-len(str)|<len(str)*125%
    ```
2. è®¡ç®—çš„è±æ–‡æ–¯è·ç¦»ä¹Ÿåº”è¯¥å­˜åœ¨ä¸€ä¸ªä¸Šé™,å¦‚
    ```
    Levenshtein.distance(str_, i)<=len(str)*25%
    ```

### 2. åœ¨æœ‰ä¸€äº›é™åˆ¶çš„æƒ…å†µä¸‹   
äºæ˜¯æœ‰ä¸‹é¢æ”¹è¿›çš„ä»£ç ï¼š  
è¿”å›åˆ—è¡¨ä¸­è±æ–‡æ–¯è·ç¦»çš„æœ€å°ï¼Œä¸”é•¿åº¦ç›¸å¯¹å·®æœ€å°çš„é¡¹çš„é›†åˆ
```python
import Levenshtein
import englishwords

lis = englishwords.lis

infinity = float("inf")


def same_value(value_, lis_1, lis_, difmax_=infinity):
    return [lis_[i] for i in range(len(lis_1)) if lis_1[i] == value_ and lis_1[i] < difmax_]
    # è¿”å›åˆ—è¡¨è±æ–‡æ–¯å¦è·ç¦»ç›¸åŒçš„é¡¹ï¼Œå¦‚æœå­˜åœ¨ä¸ºå‚æ•°difmaxèµ‹å€¼åˆ™è¿”å›çš„é¡¹è¢«è¿™ä¸ªå®¹è®¸å·®å€¼é™åˆ¶


def min_len_dif(value_, lis_, difmax_=infinity):
    min_dif_set = set()  # å¯èƒ½æœ‰å¤šä»¥ä¸Šè·ç¦»å·®å€¼ç›¸åŒ
    if lis_:
        # åœ¨è·ç¦»é™åˆ¶ä¸‹çš„åˆ—è¡¨ä¸ä¸ºç©º
        len_dif_min = abs(len(lis_[0]) - len(value_))
        # å…ˆå–ç¬¬ä¸€é¡¹çš„è·ç¦»
        for i in lis_:
            len_dif = abs(len(i) - len(value_))
            if len_dif <= len_dif_min and len_dif<difmax_:
                # å­—ç¬¦ä¸²é•¿åº¦çš„å·®è·å°äºæœ€å°å€¼ä¸”å°äºé™å®šçš„æœ€å°å€¼
                if len_dif < len_dif_min:
                    min_dif_set.clear()
                    # å¦‚æœå‡ºç°ä¸€ä¸ªæ–°çš„æœ€å°å€¼ï¼Œåˆ™æ¸…ç©ºé›†åˆ
                    len_dif_min = len_dif
                    # è®°å½•æœ€å°å€¼
                min_dif_set.add(i)
    if min_dif_set:
        return min_dif_set
        # è¿”å›åˆ—è¡¨ä¸­é•¿åº¦ç›¸å·®æœ€å°çš„é¡¹çš„é›†åˆ

def fuzzy_search(str_, lis_, maxl=infinity, maxk=infinity):
    lis_1 = [Levenshtein.distance(str_, i) for i in lis_]
    # åˆ†åˆ«è®¡ç®—è±æ–‡æ–¯å¦è·ç¦»ï¼ˆLevenshteinï¼‰
    same_Leve = same_value(min(lis_1), lis_1, lis_, maxl)
    # è®°å½•æ‰€æœ‰è±æ–‡æ–¯å¦æœ€å°ä¸”ç›¸åŒçš„é¡¹
    return min_len_dif(str_, same_Leve,maxk)
    # è¿”å›åˆ—è¡¨ä¸­è±æ–‡æ–¯è·ç¦»çš„æœ€å°ï¼Œä¸”é•¿åº¦ç›¸å¯¹å·®æœ€å°çš„é¡¹


s1 = 'directy'
maxl1 = int(len(s1) * 50 / 100)
maxk1 = int(len(s1) * 50 / 100)
print(fuzzy_search(s1, lis, maxl=maxl1, maxk=maxk1))
print('-----------')


s2 = 'dieooooooocty'
maxl2 = int(len(s2) * 50 / 100)
maxk2 = int(len(s2) * 200 / 100)
maxk3 = int(len(s2) * 20 / 100)
maxk4 = int(len(s2) * 50 / 100)

print('maxl2=0.5','maxk2=2:',fuzzy_search(s2, lis, maxl=maxl2, maxk=maxk2))
print('maxk4=0.2:',fuzzy_search(s2, lis, maxk=maxk3))
print('maxk4=0.5:',fuzzy_search(s2, lis, maxk=maxk4))

# è¾“å‡º:
# {'directly'}
# -----------
# maxl2=0.5 maxk2=2: None
# maxk4=0.2: None
# maxk4=0.5: {'discomfort'}

```


```python
# @File    : englishwords.py
lis = ['', 'settle', 'oppose', 'mood', 'craftsman',
            'agitate', 'catholic', 'go-ahe', 'bribery',
            'emphasize']
```

ğŸ‘†è¿™å„¿çš„åˆ—è¡¨åªåˆ—äº†åˆ—è¡¨`lis=..`çš„éƒ¨åˆ†,å®Œæ•´çš„æ–‡ä»¶(ä¸€äº›è‹±è¯­å•è¯)ï¼š
<a  href="https://github.com/xx025/xx025.github.com/blob/master/assets/file/2020-10-16/englishwords.py">englishwords.py</a> 